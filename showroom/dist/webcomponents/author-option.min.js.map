{"version":3,"file":"author-option.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorOptionElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineAttributes({\n      disabled: false,\n      hover: false,\n      id: '',\n      label: '',\n      selected: false,\n      value: ''\n    })\n\n    this.UTIL.defineProperties({\n      defaultSelected: false,\n\n      form: {\n        readonly: true,\n        private: true\n      },\n\n      index: {\n        readonly: true,\n        get: () => this.parentNode.options.findIndex(option => option.displayElement === this)\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      mouseButtonIsDown: evt => {\n        let code = evt.buttons !== undefined ? evt.buttons : evt.nativeEvent.which\n        return code >= 1\n      },\n\n      mousemoveHandler: evt => this.emit('option.hovered', this.index),\n\n      mouseoutHandler: evt => this.hover = false,\n\n      mouseoverHandler: evt => {\n        let mousedown = this.PRIVATE.mouseButtonIsDown(evt)\n\n        if (!(this.parentNode.multiple && mousedown)) {\n          this.hover = true\n          return\n        }\n\n        let { shiftKey, metaKey, ctrlKey } = evt\n        this.PRIVATE.select(true, metaKey, ctrlKey, mousedown)\n      },\n\n      parentStateChangeHandler: evt => {\n        let { name, value } = evt.detail\n\n        switch (name) {\n          case 'multiple':\n            return this.PRIVATE.setMode(value ? 'select-multiple' : 'select-one')\n\n          default: return\n        }\n      },\n\n      setMode: mode => {\n        switch (mode) {\n          case 'select-multiple':\n            this.off('mouseup', this.PRIVATE.selectionHandler)\n            this.on('mousedown', this.PRIVATE.selectionHandler)\n            break\n\n          case 'select-one':\n            this.on('mouseup', this.PRIVATE.selectionHandler)\n            this.off('mousedown', this.PRIVATE.selectionHandler)\n            break\n\n          default: return\n        }\n      },\n\n      select: (shiftKey = false, metaKey = false, ctrlKey = false, mousedown = false) => {\n        let { index } = this\n        this.emit('option.selected', {index, shiftKey, metaKey, ctrlKey, mousedown}, this.parentNode)\n      },\n\n      selectionHandler: evt => {\n        let { shiftKey, metaKey, ctrlKey } = evt\n        this.PRIVATE.select(shiftKey, metaKey, ctrlKey)\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.parentNode.on('state.change', this.PRIVATE.parentStateChangeHandler)\n        this.parentNode.multiple && this.PRIVATE.setMode('select-multiple')\n      },\n\n      disconnected: () => {\n        this.off('mousedown', this.PRIVATE.selectionHandler)\n        this.parentNode.off('state.change', this.PRIVATE.parentStateChangeHandler)\n      },\n\n      mouseover: this.PRIVATE.mouseoverHandler,\n      mousemove: this.PRIVATE.mousemoveHandler,\n      mouseout: this.PRIVATE.mouseoutHandler,\n      mouseup: this.PRIVATE.selectionHandler\n    })\n  }\n\n  static get observedAttributes () {\n    return ['disabled', 'hover', 'label', 'selected', 'value']\n  }\n\n  get text () {\n    return this.innerHTML\n  }\n\n  set text (content) {\n    this.innerHTML = content\n  }\n\n  /**\n   * @method remove\n   * Remove this option from the DOM.\n   * @override\n   */\n  remove () {\n    this.parentNode.options.splice(this.index, 1)\n    super.remove()\n  }\n}\n\ncustomElements.define('author-option', AuthorOptionElement)\n\nexport default AuthorOptionElement\n"],"names":["AuthorOptionElement","AuthorBaseElement","HTMLElement","[object Object]","super","this","UTIL","defineAttributes","disabled","hover","id","label","selected","value","defineProperties","defaultSelected","form","readonly","private","index","get","parentNode","options","findIndex","option","displayElement","definePrivateMethods","mouseButtonIsDown","evt","undefined","buttons","nativeEvent","which","mousemoveHandler","emit","mouseoutHandler","mouseoverHandler","mousedown","PRIVATE","multiple","shiftKey","metaKey","ctrlKey","select","parentStateChangeHandler","name","detail","setMode","mode","off","selectionHandler","on","registerListeners","connected","disconnected","mouseover","mousemove","mouseout","mouseup","observedAttributes","text","innerHTML","content","splice","remove","customElements","define"],"mappings":"oRAAA,MAAMA,UAA4BC,kBAAkBC,cAClDC,cACEC,MAAM,ueAENC,KAAKC,KAAKC,iBAAiB,CACzBC,UAAU,EACVC,OAAO,EACPC,GAAI,GACJC,MAAO,GACPC,UAAU,EACVC,MAAO,KAGTR,KAAKC,KAAKQ,iBAAiB,CACzBC,iBAAiB,EAEjBC,KAAM,CACJC,UAAU,EACVC,SAAS,GAGXC,MAAO,CACLF,UAAU,EACVG,IAAK,IAAMf,KAAKgB,WAAWC,QAAQC,UAAUC,GAAUA,EAAOC,iBAAmBpB,SAIrFA,KAAKC,KAAKoB,qBAAqB,CAC7BC,kBAAmBC,IAEjB,YAD2BC,IAAhBD,EAAIE,QAAwBF,EAAIE,QAAUF,EAAIG,YAAYC,QACtD,GAGjBC,iBAAkBL,GAAOvB,KAAK6B,KAAK,iBAAkB7B,KAAKc,OAE1DgB,gBAAiBP,GAAOvB,KAAKI,OAAQ,EAErC2B,iBAAkBR,IAChB,IAAIS,EAAYhC,KAAKiC,QAAQX,kBAAkBC,GAE/C,IAAMvB,KAAKgB,WAAWkB,WAAYF,EAEhC,YADAhC,KAAKI,OAAQ,GAIf,IAAI+B,SAAEA,EAAQC,QAAEA,EAAOC,QAAEA,GAAYd,EACrCvB,KAAKiC,QAAQK,QAAO,EAAMF,EAASC,EAASL,IAG9CO,yBAA0BhB,IACxB,IAAIiB,KAAEA,EAAIhC,MAAEA,GAAUe,EAAIkB,OAE1B,OAAQD,GACN,IAAK,WACH,OAAOxC,KAAKiC,QAAQS,QAAQlC,EAAQ,kBAAoB,cAE1D,QAAS,SAIbkC,QAASC,IACP,OAAQA,GACN,IAAK,kBACH3C,KAAK4C,IAAI,UAAW5C,KAAKiC,QAAQY,kBACjC7C,KAAK8C,GAAG,YAAa9C,KAAKiC,QAAQY,kBAClC,MAEF,IAAK,aACH7C,KAAK8C,GAAG,UAAW9C,KAAKiC,QAAQY,kBAChC7C,KAAK4C,IAAI,YAAa5C,KAAKiC,QAAQY,kBACnC,MAEF,QAAS,SAIbP,OAAQ,CAACH,GAAW,EAAOC,GAAU,EAAOC,GAAU,EAAOL,GAAY,KACvE,IAAIlB,MAAEA,GAAUd,KAChBA,KAAK6B,KAAK,kBAAmB,CAACf,MAAAA,EAAOqB,SAAAA,EAAUC,QAAAA,EAASC,QAAAA,EAASL,UAAAA,GAAYhC,KAAKgB,aAGpF6B,iBAAkBtB,IAChB,IAAIY,SAAEA,EAAQC,QAAEA,EAAOC,QAAEA,GAAYd,EACrCvB,KAAKiC,QAAQK,OAAOH,EAAUC,EAASC,MAI3CrC,KAAKC,KAAK8C,kBAAkB/C,KAAM,CAChCgD,UAAW,KACThD,KAAKgB,WAAW8B,GAAG,eAAgB9C,KAAKiC,QAAQM,0BAChDvC,KAAKgB,WAAWkB,UAAYlC,KAAKiC,QAAQS,QAAQ,oBAGnDO,aAAc,KACZjD,KAAK4C,IAAI,YAAa5C,KAAKiC,QAAQY,kBACnC7C,KAAKgB,WAAW4B,IAAI,eAAgB5C,KAAKiC,QAAQM,2BAGnDW,UAAWlD,KAAKiC,QAAQF,iBACxBoB,UAAWnD,KAAKiC,QAAQL,iBACxBwB,SAAUpD,KAAKiC,QAAQH,gBACvBuB,QAASrD,KAAKiC,QAAQY,mBAI1BS,gCACE,MAAO,CAAC,WAAY,QAAS,QAAS,WAAY,SAGpDC,WACE,OAAOvD,KAAKwD,UAGdD,SAAUE,GACRzD,KAAKwD,UAAYC,EAQnB3D,SACEE,KAAKgB,WAAWC,QAAQyC,OAAO1D,KAAKc,MAAO,GAC3Cf,MAAM4D,iBAIVC,eAAeC,OAAO,gBAAiBlE"}